/*! hover-newsletter-counter */
define([],function(){var e;return e={id:void 0,views:3,active:!0,cookieName:"nls2",viewsCap:9,viewsById:{},init:function(e){return e&&e.id&&e.nl?(this.debug("settings are as follows"),webmd.debug(e),$.extend(this,e),this.cookieGet(),this.active||this.isTestMode()?(this.viewsById[this.id]!=this.views&&this.increment(),this.isPageExcluded()?(this.debug("excluded on this page"),void 0):(this.shouldDisplay()?(this.debug("should display"),webmd.p.pim.increment(),this.deactivate(),this.display()):(this.debug("should not display"),this.cookieSet()),void 0)):(this.debug("inactive"),void 0)):(this.debug("missing settings"),void 0)},isTestMode:function(){return webmd.url.getParam("testnewsletterhover")},isPageExcluded:function(){var e;return this.isTestMode()?!1:webmd.isDown("reg")?(this.debug("excluded because registration is down"),!0):window.s_sponsor_program?(this.debug("excluded on sponsored pages"),!0):"http:"!==location.protocol?(this.debug("excluded on non-http pages"),!0):window.opener?(this.debug("excluded on pop-up window"),!0):window.top!==window.self?(this.debug("excluded within iframe"),!0):this.excludeHref&&(e=RegExp(this.excludeHref),e.test(location.href))?(this.debug("excluded due to url match"),!0):this.excludeHostname&&(e=RegExp(this.excludeHostname),e.test(location.hostname))?(this.debug("excluded due to hostname match"),!0):webmd.p.pim.isAllowed()?!1:(this.debug("excluded due to PIM"),!0)},cookieGet:function(){var e;return webmd.cookie.exists(this.cookieName)?(this.debug("cookie value = "+webmd.cookie.get(this.cookieName)),e=webmd.cookie.getJson(this.cookieName),this.active=Boolean(e.a===void 0),this.viewsById=e.i||{},void 0):(this.debug("cookie was not found."),void 0)},cookieSet:function(){var e,t;e={},this.active?e.i=this.viewsById:(e.a=0,t=7),webmd.cookie.setJson(this.cookieName,e,{domain:webmd.url.getSLD(),expires:t})},increment:function(){var e;e=this.cap((this.viewsById[this.id]||0)+1),this.viewsById[this.id]=e,this.cookieSet(),this.debug("views for id "+this.id+" = "+e),this.debug("target views = "+this.views)},shouldDisplay:function(){var e;return e=this.viewsById[this.id]||0,this.isTestMode()||e===this.views},display:function(){var e;e=this,this.cds?require(["newsletter/1/cds-newsletter-hover-ui","css!newsletter/1/cds-newsletter.css"],function(e){e.init()}):require(["newsletter-hover/1/hover-newsletter-ui"],function(t){t.init({nl:e.nl})})},deactivate:function(){this.active=!1,this.cookieSet()},cap:function(e){return e>this.viewsCap&&(e=this.viewsCap),e},debug:function(e){webmd.debug("Newsletter hover: "+e)}}});